<div class="container">

	<div class="page-header">
		<h1>Update your wiki<small> ...change is good!</small></h1>
	</div>

<div class="row">
	<div class="col-md-8">

	<%= form_for @wiki do |f| %>

		<div class="form-group">
			<%= f.label :title %>
			<%= f.text_field :title, class: 'form-control' %>
		</div>

		<div class="form-group">
			<%= f.label :body %>
			<%= f.text_area :body, rows: 12, class: 'form-control' %>
		</div>

		<div class="form-group">
			<%= f.submit "Update", class: 'btn btn-success' %>
		</div>
		
		<% if current_user.role == 'admin' || current_user.role == 'premium' %>
			<div class="form-group">
					<%= f.check_box :private %> Private wiki
					<%= f.label :private, class: 'checkbox' do %>
					<% end %>
			</div>

			<hr class="divider">

		<h4>Add collaborators</h4>

			<% @users.each do |user| %>
				<ul class="list-group">
	  				<li class="list-group-item" input type="col-id" id="<%= user.id %>">
	  					<%= f.label :collaborator, class: 'checkbox' do %>
	  					<%= f.check_box :user_id %>
	  					<%= user.username %>
	  					<% end %>
	  				</li>
				</ul>		
			<% end %>
<script>

function checkArray(array, id){
  var index = array.indexOf(id);
  if(index > -1){
  array.splice(index, 1);
  }
  else{
  array.push(id);
  }
  console.log(array);
  return array;
  }

$(document).ready(function() {
  var selected = []
$('.table tbody').on( 'click', 'tr input', function () {
  checkArray(selected, $(this).val());
  } );
$('#add-collaborators).click( function () {
  $('#col-ids).val(selected);
  } );

</script>

		<% end %>

	<% end %>
	
	</div>
</div>

</div>